<html>
<head>
<style>
	img {
		position: fixed;
		top: 0;
		left: 0;
	}
</style>
<title>Theia Signage Window</title>
<script src="jquery.min.js"></script>
<script type="text/javascript">
	// Theia Digital Signage Software
	// Author: Max Pereira - 2019
	// Github: maxpereira

	// ------------- Configurable Theia Options -------------
	
	// Choose cycle mode (random, ordered)
	var cycleMode = "ordered"; // Default: ordered
	
	// Image display duration in seconds
	var duration = 1; // Default: 30
	
	// Force image size to fit the screen
	var forceSize = false; // Default: false
	var forceWidth = 1920;
	var forceHeight = 1080;
	
	// Fade between images (NOT IMPLEMENTED YET)
	var fadeBetween = false; // Default: false
	var fadeTime = 3; // Fade time in seconds

	// -------------  END Configurable Options  -------------

	// Get array of image filenames from files.txt
	arrImg = [];
	
	$.get('files.txt', function(data) {    
		arrImg = data.split("\n");
	})
	
	var rndIndex = 0;
	var rndIndexOld = 0;
	
	// Load the next image to the viewport randomly
	function theiaTick() {
		var imgNext = new Image();
		
		rndIndexOld = rndIndex;
		
		// Randomly cycle through photos
		if (cycleMode == "random") {
			rndIndex = Math.floor(Math.random()*arrImg.length);
			while (rndIndex == rndIndexOld) {
				rndIndex = Math.floor(Math.random()*arrImg.length);
			}
		// Cycle through photos in order
		} else if (cycleMode == "ordered") {
			if (rndIndexOld < arrImg.length-1) {
				rndIndex = rndIndexOld+1;
			} else {
				rndIndex = 0;
			}
		}
		
		var rndImg = arrImg[rndIndex];
		imgNext.src = "images/" + rndImg;
		if (forceSize == true) {
			imgNext.width = forceWidth;
			imgNext.height = forceHeight;
		}

		document.body.innerHTML = "<div id='theiaContainer'></div>";
		document.body.appendChild(imgNext);
	}
	
	// Load the first image on page load
	window.onload=theiaTick;
	
	// Start Theia heartbeat
	setInterval(theiaTick, duration*1000);
</script>
<body bgcolor="black">
</body>
</html>